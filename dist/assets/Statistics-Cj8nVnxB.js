import{c as Me,w as q,R as j,L as Z,x as ae,y as Y,z as ne,A as Te,D as G,E as he,G as Be,H as me,I as Oe,J as Re,K as Fe,r as W,M as Ke,N as pe,O as fe,Q as de,S as We,T as ze,U as De,V as Pe,X as J,Y as ee,W as Se,j as e,m as I,o as L,Z as Q,n as C,s as R,_ as xe,$ as ye,a0 as ge,a1 as Ve,a2 as $e,a3 as ve,a4 as je,p as B,a5 as qe,a6 as Ge,a7 as He,a8 as Ye,q as H,a9 as re,aa as Xe,ab as ie,ac as oe,ad as Ue,ae as be,af as Ze,B as Ae}from"./index-CHTwuzBj.js";import{u as Qe}from"./useQuery-BmdVUKZ_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=Me("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);var Je=["layout","type","stroke","connectNulls","isRange","ref"],et=["key"],_e;function X(t){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},X(t)}function Ee(t,a){if(t==null)return{};var n=tt(t,a),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function tt(t,a){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(a.indexOf(s)>=0)continue;n[s]=t[s]}return n}function $(){return $=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$.apply(this,arguments)}function we(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function z(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?we(Object(n),!0).forEach(function(s){F(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function at(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function Ne(t,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Ie(s.key),s)}}function st(t,a,n){return a&&Ne(t.prototype,a),n&&Ne(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nt(t,a,n){return a=se(a),rt(t,ke()?Reflect.construct(a,n||[],se(t).constructor):a.apply(t,n))}function rt(t,a){if(a&&(X(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(t)}function it(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ke=function(){return!!t})()}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},se(t)}function ot(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),a&&ue(t,a)}function ue(t,a){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},ue(t,a)}function F(t,a,n){return a=Ie(a),a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function Ie(t){var a=ct(t,"string");return X(a)=="symbol"?a:a+""}function ct(t,a){if(X(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,a||"default");if(X(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var V=function(t){function a(){var n;at(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return n=nt(this,a,[].concat(r)),F(n,"state",{isAnimationFinished:!0}),F(n,"id",ze("recharts-area-")),F(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),de(o)&&o()}),F(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),de(o)&&o()}),n}return ot(a,t),st(a,[{key:"renderDots",value:function(s,r,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var u=this.props,d=u.dot,p=u.points,h=u.dataKey,m=q(this.props,!1),O=q(d,!0),D=p.map(function(A,E){var N=z(z(z({key:"dot-".concat(E),r:3},m),O),{},{index:E,cx:A.x,cy:A.y,dataKey:h,value:A.value,payload:A.payload,points:p});return a.renderDotItem(d,N)}),S={clipPath:s?"url(#clipPath-".concat(r?"":"dots-").concat(i,")"):null};return j.createElement(Z,$({className:"recharts-area-dots"},S),D)}},{key:"renderHorizontalRect",value:function(s){var r=this.props,i=r.baseLine,o=r.points,l=r.strokeWidth,u=o[0].x,d=o[o.length-1].x,p=s*Math.abs(u-d),h=ae(o.map(function(m){return m.y||0}));return Y(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(ae(i.map(function(m){return m.y||0})),h)),Y(h)?j.createElement("rect",{x:u<d?u:u-p,y:0,width:p,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var r=this.props,i=r.baseLine,o=r.points,l=r.strokeWidth,u=o[0].y,d=o[o.length-1].y,p=s*Math.abs(u-d),h=ae(o.map(function(m){return m.x||0}));return Y(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(ae(i.map(function(m){return m.x||0})),h)),Y(h)?j.createElement("rect",{x:0,y:u<d?u:u-p,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(p)}):null}},{key:"renderClipRect",value:function(s){var r=this.props.layout;return r==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,r,i,o){var l=this.props,u=l.layout,d=l.type,p=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var O=Ee(l,Je);return j.createElement(Z,{clipPath:i?"url(#clipPath-".concat(o,")"):null},j.createElement(ne,$({},q(O,!0),{points:s,connectNulls:h,type:d,baseLine:r,layout:u,stroke:"none",className:"recharts-area-area"})),p!=="none"&&j.createElement(ne,$({},q(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:s})),p!=="none"&&m&&j.createElement(ne,$({},q(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(s,r){var i=this,o=this.props,l=o.points,u=o.baseLine,d=o.isAnimationActive,p=o.animationBegin,h=o.animationDuration,m=o.animationEasing,O=o.animationId,D=this.state,S=D.prevPoints,A=D.prevBaseLine;return j.createElement(Te,{begin:p,duration:h,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(O),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var N=E.t;if(S){var M=S.length/l.length,g=l.map(function(P,K){var T=Math.floor(K*M);if(S[T]){var c=S[T],y=G(c.x,P.x),x=G(c.y,P.y);return z(z({},P),{},{x:y(N),y:x(N)})}return P}),v;if(Y(u)&&typeof u=="number"){var b=G(A,u);v=b(N)}else if(he(u)||Be(u)){var _=G(A,0);v=_(N)}else v=u.map(function(P,K){var T=Math.floor(K*M);if(A[T]){var c=A[T],y=G(c.x,P.x),x=G(c.y,P.y);return z(z({},P),{},{x:y(N),y:x(N)})}return P});return i.renderAreaStatically(g,v,s,r)}return j.createElement(Z,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(r)},i.renderClipRect(N))),j.createElement(Z,{clipPath:"url(#animationClipPath-".concat(r,")")},i.renderAreaStatically(l,u,s,r)))})}},{key:"renderArea",value:function(s,r){var i=this.props,o=i.points,l=i.baseLine,u=i.isAnimationActive,d=this.state,p=d.prevPoints,h=d.prevBaseLine,m=d.totalLength;return u&&o&&o.length&&(!p&&m>0||!me(p,o)||!me(h,l))?this.renderAreaWithAnimation(s,r):this.renderAreaStatically(o,l,s,r)}},{key:"render",value:function(){var s,r=this.props,i=r.hide,o=r.dot,l=r.points,u=r.className,d=r.top,p=r.left,h=r.xAxis,m=r.yAxis,O=r.width,D=r.height,S=r.isAnimationActive,A=r.id;if(i||!l||!l.length)return null;var E=this.state.isAnimationFinished,N=l.length===1,M=Oe("recharts-area",u),g=h&&h.allowDataOverflow,v=m&&m.allowDataOverflow,b=g||v,_=he(A)?this.id:A,P=(s=q(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},K=P.r,T=K===void 0?3:K,c=P.strokeWidth,y=c===void 0?2:c,x=Re(o)?o:{},f=x.clipDot,w=f===void 0?!0:f,k=T*2+y;return j.createElement(Z,{className:M},g||v?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(_)},j.createElement("rect",{x:g?p:p-O/2,y:v?d:d-D/2,width:g?O:O*2,height:v?D:D*2})),!w&&j.createElement("clipPath",{id:"clipPath-dots-".concat(_)},j.createElement("rect",{x:p-k/2,y:d-k/2,width:O+k,height:D+k}))):null,N?null:this.renderArea(b,_),(o||N)&&this.renderDots(b,w,_),(!S||E)&&Fe.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,r){return s.animationId!==r.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:r.curPoints,prevBaseLine:r.curBaseLine}:s.points!==r.curPoints||s.baseLine!==r.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(W.PureComponent);_e=V;F(V,"displayName","Area");F(V,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ke.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});F(V,"getBaseValue",function(t,a,n,s){var r=t.layout,i=t.baseValue,o=a.props.baseValue,l=o??i;if(Y(l)&&typeof l=="number")return l;var u=r==="horizontal"?s:n,d=u.scale.domain();if(u.type==="number"){var p=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||p<0?p:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});F(V,"getComposedData",function(t){var a=t.props,n=t.item,s=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,u=t.dataKey,d=t.stackedData,p=t.dataStartIndex,h=t.displayedData,m=t.offset,O=a.layout,D=d&&d.length,S=_e.getBaseValue(a,n,s,r),A=O==="horizontal",E=!1,N=h.map(function(g,v){var b;D?b=d[p+v]:(b=pe(g,u),Array.isArray(b)?E=!0:b=[S,b]);var _=b[1]==null||D&&pe(g,u)==null;return A?{x:fe({axis:s,ticks:i,bandSize:l,entry:g,index:v}),y:_?null:r.scale(b[1]),value:b,payload:g}:{x:_?null:s.scale(b[1]),y:fe({axis:r,ticks:o,bandSize:l,entry:g,index:v}),value:b,payload:g}}),M;return D||E?M=N.map(function(g){var v=Array.isArray(g.value)?g.value[0]:null;return A?{x:g.x,y:v!=null&&g.y!=null?r.scale(v):null}:{x:v!=null?s.scale(v):null,y:g.y}}):M=A?r.scale(S):s.scale(S),z({points:N,baseLine:M,layout:O,isRange:E},m)});F(V,"renderDotItem",function(t,a){var n;if(j.isValidElement(t))n=j.cloneElement(t,a);else if(de(t))n=t(a);else{var s=Oe("recharts-area-dot",typeof t!="boolean"?t.className:""),r=a.key,i=Ee(a,et);n=j.createElement(We,$({},i,{key:r,className:s}))}return n});var lt=De({chartName:"BarChart",GraphicalChild:Pe,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:J},{axisType:"yAxis",AxisComp:ee}],formatAxisMap:Se}),dt=De({chartName:"AreaChart",GraphicalChild:V,axisComponents:[{axisType:"xAxis",AxisComp:J},{axisType:"yAxis",AxisComp:ee}],formatAxisMap:Se});function le(){return e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(Q,{className:"h-5 w-3/4"}),e.jsx(Q,{className:"h-4 w-1/2 mt-2"})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsx(Q,{className:"h-4 w-full"}),e.jsx(Q,{className:"h-4 w-5/6"}),e.jsx(Q,{className:"h-4 w-4/6"})]})]})}function ut(){return Qe({queryKey:["clinical-insights"],queryFn:async()=>{const{data:t,error:a}=await R.from("clinical_insights").select("*").order("generated_at",{ascending:!1});if(a)throw a;return t}})}function ht(){return async()=>{try{const{data:t,error:a}=await R.functions.invoke("analyze-patterns");if(a)throw a;if(!(t!=null&&t.success))throw new Error((t==null?void 0:t.error)||"Error al generar insights");return xe.success("Insights generados exitosamente"),t}catch(t){throw xe.error(t.message||"Error al generar insights"),t}}}function ft(){var P,K,T;const[t,a]=W.useState(null),[n,s]=W.useState(!0),[r,i]=W.useState([]),[o,l]=W.useState([]),[u,d]=W.useState([]),[p,h]=W.useState(!1),{data:m,isLoading:O,refetch:D}=ut(),S=ht();W.useEffect(()=>{A()},[]);const A=async()=>{try{const{count:c}=await R.from("patients").select("*",{count:"exact",head:!0}),{count:y}=await R.from("patients").select("*",{count:"exact",head:!0}).eq("status","active"),x=new Date;x.setDate(1),x.setHours(0,0,0,0);const{count:f}=await R.from("admissions").select("*",{count:"exact",head:!0}).gte("admission_date",x.toISOString()),{data:w}=await R.from("admissions").select("admission_date, discharge_date").not("discharge_date","is",null).limit(100);let k=0,U=0;w==null||w.forEach(te=>{if(te.discharge_date&&te.admission_date){const Le=new Date(te.discharge_date).getTime()-new Date(te.admission_date).getTime();k+=Le/(1e3*60*60*24),U++}});const Ce=U>0?Math.round(k/U):0;a({totalPatients:c||0,averageStay:Ce,currentOccupancy:y||0,monthlyAdmissions:f||0}),await E(),await N(),await M()}catch(c){console.error("Error fetching statistics:",c)}finally{s(!1)}},E=async()=>{const c=[];for(let x=5;x>=0;x--){const f=new Date;f.setMonth(f.getMonth()-x),c.push({month:f.toLocaleDateString("es-CL",{month:"short"}),year:f.getFullYear(),startDate:new Date(f.getFullYear(),f.getMonth(),1),endDate:new Date(f.getFullYear(),f.getMonth()+1,0)})}const y=await Promise.all(c.map(async({month:x,startDate:f,endDate:w})=>{const{count:k}=await R.from("admissions").select("*",{count:"exact",head:!0}).gte("admission_date",f.toISOString()).lte("admission_date",w.toISOString()),{count:U}=await R.from("admissions").select("*",{count:"exact",head:!0}).gte("discharge_date",f.toISOString()).lte("discharge_date",w.toISOString()).not("discharge_date","is",null);return{month:x,Ingresos:k||0,Egresos:U||0}}));i(y)},N=async()=>{const{data:c}=await R.from("admissions").select("admission_diagnoses").not("admission_diagnoses","is",null).limit(100),y={};c==null||c.forEach(f=>{var w;(w=f.admission_diagnoses)==null||w.forEach(k=>{y[k]=(y[k]||0)+1})});const x=Object.entries(y).sort(([,f],[,w])=>w-f).slice(0,10).map(([f,w])=>({name:f.substring(0,30),value:w}));l(x)},M=async()=>{const c=[];for(let y=29;y>=0;y--){const x=new Date;x.setDate(x.getDate()-y),x.setHours(0,0,0,0);const f=new Date(x);f.setDate(f.getDate()+1);const{count:w}=await R.from("admissions").select("*",{count:"exact",head:!0}).lte("admission_date",f.toISOString()).or(`discharge_date.gte.${x.toISOString()},discharge_date.is.null`);c.push({day:x.getDate()+"/"+(x.getMonth()+1),pacientes:w||0})}d(c)},g=async()=>{h(!0);try{await S(),await D()}catch(c){console.error("Error generando insights:",c)}finally{h(!1)}},v=m==null?void 0:m.find(c=>c.insight_type==="diagnosticos_frecuentes"),b=m==null?void 0:m.find(c=>c.insight_type==="alertas"),_=m==null?void 0:m.find(c=>c.insight_type==="recomendaciones");return n?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(le,{}),e.jsx(le,{})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Estadísticas y Análisis"}),e.jsx("p",{className:"text-muted-foreground",children:"Panel de control y análisis inteligente"})]}),e.jsx(ye,{onClick:g,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Generando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Generar Insights IA"]})})]}),e.jsxs(Ve,{defaultValue:"estadisticas",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(ve,{value:"estadisticas",children:"Estadísticas"}),e.jsx(ve,{value:"insights",children:"Insights IA"})]}),e.jsxs(je,{value:"estadisticas",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(I,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Pacientes"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==null?void 0:t.totalPatients}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Histórico"})]})]}),e.jsxs(I,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Ocupación Actual"}),e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==null?void 0:t.currentOccupancy}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pacientes activos"})]})]}),e.jsxs(I,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Estadía Promedio"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==null?void 0:t.averageStay}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Días"})]})]}),e.jsxs(I,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Ingresos del Mes"}),e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==null?void 0:t.monthlyAdmissions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date().toLocaleDateString("es-CL",{month:"long"})})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Tendencia de Ingresos y Egresos"}),e.jsx(H,{children:"Últimos 6 meses"})]}),e.jsx(C,{children:e.jsx(re,{width:"100%",height:300,children:e.jsxs(Xe,{data:r,children:[e.jsx(ie,{strokeDasharray:"3 3"}),e.jsx(J,{dataKey:"month"}),e.jsx(ee,{}),e.jsx(oe,{}),e.jsx(Ue,{}),e.jsx(be,{type:"monotone",dataKey:"Ingresos",stroke:"hsl(221, 83%, 53%)",strokeWidth:2}),e.jsx(be,{type:"monotone",dataKey:"Egresos",stroke:"hsl(142, 76%, 36%)",strokeWidth:2})]})})})]}),e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Top 10 Diagnósticos"}),e.jsx(H,{children:"Más frecuentes"})]}),e.jsx(C,{children:e.jsx(re,{width:"100%",height:300,children:e.jsxs(lt,{data:o,layout:"vertical",children:[e.jsx(ie,{strokeDasharray:"3 3"}),e.jsx(J,{type:"number"}),e.jsx(ee,{dataKey:"name",type:"category",width:150}),e.jsx(oe,{}),e.jsx(Pe,{dataKey:"value",fill:"hsl(221, 83%, 53%)"})]})})})]}),e.jsxs(I,{className:"md:col-span-2",children:[e.jsxs(L,{children:[e.jsx(B,{children:"Ocupación Diaria"}),e.jsx(H,{children:"Últimos 30 días"})]}),e.jsx(C,{children:e.jsx(re,{width:"100%",height:300,children:e.jsxs(dt,{data:u,children:[e.jsx(ie,{strokeDasharray:"3 3"}),e.jsx(J,{dataKey:"day"}),e.jsx(ee,{}),e.jsx(oe,{}),e.jsx(V,{type:"monotone",dataKey:"pacientes",stroke:"hsl(217, 91%, 60%)",fill:"hsl(217, 91%, 60%, 0.2)"})]})})})]})]})]}),e.jsx(je,{value:"insights",className:"space-y-4",children:O?e.jsx(le,{}):!m||m.length===0?e.jsx(I,{children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No hay insights generados"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Genera insights con IA para obtener análisis profundos de los datos clínicos"}),e.jsx(ye,{onClick:g,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Generando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Generar Insights"]})})]})}):e.jsxs(e.Fragment,{children:[b&&((P=b.data)==null?void 0:P.insights)&&e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-orange-500"}),"Alertas Clínicas"]}),e.jsx(H,{children:"Patrones que requieren atención"})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:b.data.insights.map((c,y)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx(Ae,{variant:c.severidad==="alta"?"destructive":"secondary",className:"mt-1",children:c.severidad}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:c.tipo}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.descripcion})]})]},y))})})]}),v&&((K=v.data)==null?void 0:K.insights)&&e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Diagnósticos Más Frecuentes"}),e.jsx(H,{children:"Análisis de patrones diagnósticos"})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-2",children:v.data.insights.map((c,y)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.diagnostico}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.frecuencia," casos"]})]}),e.jsxs(Ae,{variant:"outline",children:[c.porcentaje,"%"]})]},y))})})]}),_&&((T=_.data)==null?void 0:T.insights)&&e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recomendaciones"}),e.jsx(H,{children:"Sugerencias basadas en análisis de datos"})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:_.data.insights.map((c,y)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm text-primary",children:c.area}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.recomendacion})]},y))})})]})]})})]})]})}export{ft as default};
