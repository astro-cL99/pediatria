import{c as Ne,a as Q,r as m,u as M,j as e,b as W,P as y,d as X,e as ye,f as Z,g as Ae,h as we,R as u,i as _e,k as L,C as Ie,l as Re,s as Pe,m as w,n as _,o as q,p as J,q as U,B as Ee,t as Y,F as Se,v as ke}from"./index-CHTwuzBj.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=Ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var R="Collapsible",[De,ee]=Q(R),[Te,V]=De(R),se=m.forwardRef((t,c)=>{const{__scopeCollapsible:a,open:n,defaultOpen:s,disabled:r,onOpenChange:l,...d}=t,[x,o]=M({prop:n,defaultProp:s??!1,onChange:l,caller:R});return e.jsx(Te,{scope:a,disabled:r,contentId:W(),open:x,onOpenToggle:m.useCallback(()=>o(i=>!i),[o]),children:e.jsx(y.div,{"data-state":B(x),"data-disabled":r?"":void 0,...d,ref:c})})});se.displayName=R;var te="CollapsibleTrigger",ae=m.forwardRef((t,c)=>{const{__scopeCollapsible:a,...n}=t,s=V(te,a);return e.jsx(y.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":B(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:c,onClick:X(t.onClick,s.onOpenToggle)})});ae.displayName=te;var $="CollapsibleContent",oe=m.forwardRef((t,c)=>{const{forceMount:a,...n}=t,s=V($,t.__scopeCollapsible);return e.jsx(ye,{present:a||s.open,children:({present:r})=>e.jsx(Me,{...n,ref:c,present:r})})});oe.displayName=$;var Me=m.forwardRef((t,c)=>{const{__scopeCollapsible:a,present:n,children:s,...r}=t,l=V($,a),[d,x]=m.useState(n),o=m.useRef(null),i=Z(c,o),h=m.useRef(0),C=h.current,g=m.useRef(0),A=g.current,j=l.open||d,v=m.useRef(j),b=m.useRef(void 0);return m.useEffect(()=>{const p=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(p)},[]),Ae(()=>{const p=o.current;if(p){b.current=b.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const N=p.getBoundingClientRect();h.current=N.height,g.current=N.width,v.current||(p.style.transitionDuration=b.current.transitionDuration,p.style.animationName=b.current.animationName),x(n)}},[l.open,n]),e.jsx(y.div,{"data-state":B(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!j,...r,ref:i,style:{"--radix-collapsible-content-height":C?`${C}px`:void 0,"--radix-collapsible-content-width":A?`${A}px`:void 0,...t.style},children:j&&s})});function B(t){return t?"open":"closed"}var Le=se,Ve=ae,$e=oe,f="Accordion",Be=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[H,He,ze]=we(f),[P,es]=Q(f,[ze,ee]),z=ee(),ne=u.forwardRef((t,c)=>{const{type:a,...n}=t,s=n,r=n;return e.jsx(H.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?e.jsx(qe,{...r,ref:c}):e.jsx(Ke,{...s,ref:c})})});ne.displayName=f;var[re,Fe]=P(f),[ce,Ge]=P(f,{collapsible:!1}),Ke=u.forwardRef((t,c)=>{const{value:a,defaultValue:n,onValueChange:s=()=>{},collapsible:r=!1,...l}=t,[d,x]=M({prop:a,defaultProp:n??"",onChange:s,caller:f});return e.jsx(re,{scope:t.__scopeAccordion,value:u.useMemo(()=>d?[d]:[],[d]),onItemOpen:x,onItemClose:u.useCallback(()=>r&&x(""),[r,x]),children:e.jsx(ce,{scope:t.__scopeAccordion,collapsible:r,children:e.jsx(ie,{...l,ref:c})})})}),qe=u.forwardRef((t,c)=>{const{value:a,defaultValue:n,onValueChange:s=()=>{},...r}=t,[l,d]=M({prop:a,defaultProp:n??[],onChange:s,caller:f}),x=u.useCallback(i=>d((h=[])=>[...h,i]),[d]),o=u.useCallback(i=>d((h=[])=>h.filter(C=>C!==i)),[d]);return e.jsx(re,{scope:t.__scopeAccordion,value:l,onItemOpen:x,onItemClose:o,children:e.jsx(ce,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(ie,{...r,ref:c})})})}),[Je,E]=P(f),ie=u.forwardRef((t,c)=>{const{__scopeAccordion:a,disabled:n,dir:s,orientation:r="vertical",...l}=t,d=u.useRef(null),x=Z(d,c),o=He(a),h=_e(s)==="ltr",C=X(t.onKeyDown,g=>{var G;if(!Be.includes(g.key))return;const A=g.target,j=o().filter(D=>{var K;return!((K=D.ref.current)!=null&&K.disabled)}),v=j.findIndex(D=>D.ref.current===A),b=j.length;if(v===-1)return;g.preventDefault();let p=v;const N=0,S=b-1,k=()=>{p=v+1,p>S&&(p=N)},O=()=>{p=v-1,p<N&&(p=S)};switch(g.key){case"Home":p=N;break;case"End":p=S;break;case"ArrowRight":r==="horizontal"&&(h?k():O());break;case"ArrowDown":r==="vertical"&&k();break;case"ArrowLeft":r==="horizontal"&&(h?O():k());break;case"ArrowUp":r==="vertical"&&O();break}const Ce=p%b;(G=j[Ce].ref.current)==null||G.focus()});return e.jsx(Je,{scope:a,disabled:n,direction:s,orientation:r,children:e.jsx(H.Slot,{scope:a,children:e.jsx(y.div,{...l,"data-orientation":r,ref:x,onKeyDown:n?void 0:C})})})}),I="AccordionItem",[Ue,F]=P(I),le=u.forwardRef((t,c)=>{const{__scopeAccordion:a,value:n,...s}=t,r=E(I,a),l=Fe(I,a),d=z(a),x=W(),o=n&&l.value.includes(n)||!1,i=r.disabled||t.disabled;return e.jsx(Ue,{scope:a,open:o,disabled:i,triggerId:x,children:e.jsx(Le,{"data-orientation":r.orientation,"data-state":he(o),...d,...s,ref:c,disabled:i,open:o,onOpenChange:h=>{h?l.onItemOpen(n):l.onItemClose(n)}})})});le.displayName=I;var de="AccordionHeader",pe=u.forwardRef((t,c)=>{const{__scopeAccordion:a,...n}=t,s=E(f,a),r=F(de,a);return e.jsx(y.h3,{"data-orientation":s.orientation,"data-state":he(r.open),"data-disabled":r.disabled?"":void 0,...n,ref:c})});pe.displayName=de;var T="AccordionTrigger",me=u.forwardRef((t,c)=>{const{__scopeAccordion:a,...n}=t,s=E(f,a),r=F(T,a),l=Ge(T,a),d=z(a);return e.jsx(H.ItemSlot,{scope:a,children:e.jsx(Ve,{"aria-disabled":r.open&&!l.collapsible||void 0,"data-orientation":s.orientation,id:r.triggerId,...d,...n,ref:c})})});me.displayName=T;var xe="AccordionContent",ue=u.forwardRef((t,c)=>{const{__scopeAccordion:a,...n}=t,s=E(f,a),r=F(xe,a),l=z(a);return e.jsx($e,{role:"region","aria-labelledby":r.triggerId,"data-orientation":s.orientation,...l,...n,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});ue.displayName=xe;function he(t){return t?"open":"closed"}var Ye=ne,Qe=le,We=pe,fe=me,ge=ue;const Xe=Ye,je=m.forwardRef(({className:t,...c},a)=>e.jsx(Qe,{ref:a,className:L("border-b",t),...c}));je.displayName="AccordionItem";const ve=m.forwardRef(({className:t,children:c,...a},n)=>e.jsx(We,{className:"flex",children:e.jsxs(fe,{ref:n,className:L("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...a,children:[c,e.jsx(Ie,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ve.displayName=fe.displayName;const be=m.forwardRef(({className:t,children:c,...a},n)=>e.jsx(ge,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e.jsx("div",{className:L("pb-4 pt-0",t),children:c})}));be.displayName=ge.displayName;function ss(){var x;Re();const[t,c]=m.useState([]),[a,n]=m.useState(!0),[s,r]=m.useState(null);m.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:o,error:i}=await Pe.from("clinical_protocols").select("*").order("category",{ascending:!0});if(i)throw i;c(o||[])}catch(o){console.error("Error:",o)}finally{n(!1)}},d=o=>({Neonatología:"bg-blue-500/10 text-blue-600 border-blue-500/20",Nutrición:"bg-green-500/10 text-green-600 border-green-500/20",Respiratorio:"bg-purple-500/10 text-purple-600 border-purple-500/20",Cardiovascular:"bg-red-500/10 text-red-600 border-red-500/20"})[o]||"bg-gray-500/10 text-gray-600 border-gray-500/20";return e.jsx("div",{className:"p-6 animate-fade-in",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"Protocolos Clínicos"}),e.jsx("p",{className:"text-muted-foreground",children:"Basados en guías MINSAL Chile y Academia Española de Pediatría (AEP)"})]}),a?e.jsx(w,{children:e.jsx(_,{className:"py-12 text-center text-muted-foreground",children:"Cargando protocolos..."})}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:t.map(o=>e.jsxs(w,{className:`cursor-pointer transition-all hover:shadow-lg ${(s==null?void 0:s.id)===o.id?"ring-2 ring-primary":""}`,onClick:()=>r(o),children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(J,{className:"text-lg mb-2",children:o.protocol_name}),e.jsx(U,{className:"text-sm",children:o.source})]}),e.jsx(Ee,{className:d(o.category),variant:"outline",children:o.category})]})}),e.jsxs(_,{children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.content}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Y,{className:"h-3 w-3"}),e.jsxs("span",{children:["Versión ",o.version]})]})]})]},o.id))}),e.jsx("div",{className:"md:sticky md:top-6 h-fit",children:s?e.jsxs(w,{children:[e.jsxs(q,{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),s.protocol_name]}),e.jsx(U,{children:s.content})]}),e.jsxs(_,{className:"space-y-6",children:[s.criteria&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Criterios"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(s.criteria,null,2)})})]}),s.indications&&s.indications.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-green-600"}),"Indicaciones"]}),e.jsx("ul",{className:"space-y-1",children:s.indications.map((o,i)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"•"}),e.jsx("span",{children:o})]},i))})]}),s.contraindications&&s.contraindications.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-destructive"}),"Contraindicaciones"]}),e.jsx("ul",{className:"space-y-1",children:s.contraindications.map((o,i)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-destructive",children:"•"}),e.jsx("span",{children:o})]},i))})]}),s.procedure_steps&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Pasos del Procedimiento"}),e.jsx(Xe,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(je,{value:"steps",children:[e.jsx(ve,{children:"Ver pasos detallados"}),e.jsx(be,{children:e.jsx("ol",{className:"space-y-2",children:(x=s.procedure_steps.steps)==null?void 0:x.map((o,i)=>e.jsxs("li",{className:"text-sm flex gap-3",children:[e.jsxs("span",{className:"font-semibold text-primary",children:[o.order,"."]}),e.jsx("span",{children:o.description})]},i))})})]})})]}),s.monitoring_parameters&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Monitorización"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(s.monitoring_parameters,null,2)})})]}),s.complications&&s.complications.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Complicaciones Potenciales"}),e.jsx("ul",{className:"space-y-1",children:s.complications.map((o,i)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-600",children:"⚠"}),e.jsx("span",{children:o})]},i))})]}),s.clinical_references&&s.clinical_references.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Referencias"}),e.jsx("ul",{className:"space-y-2",children:s.clinical_references.map((o,i)=>e.jsxs("li",{className:"text-xs text-muted-foreground",children:[i+1,". ",o]},i))})]}),e.jsxs("div",{className:"pt-4 border-t text-xs text-muted-foreground",children:[e.jsxs("p",{children:["Versión: ",s.version]}),e.jsxs("p",{children:["Última actualización: ",new Date(s.last_updated).toLocaleDateString("es-CL")]})]})]})]}):e.jsx(w,{children:e.jsxs(_,{className:"py-12 text-center text-muted-foreground",children:[e.jsx(Y,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Selecciona un protocolo para ver los detalles"})]})})})]})]})})}export{ss as default};
